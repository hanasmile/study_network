# Chapter05.네트워크 계층

- [네트워크 계층의 역할](#%EF%B8%8F-네트워크-계층의-역할)
- [IP 주소의 구조](#%EF%B8%8F-IP-주소의-구조)
- [IP 주소의 클래스 구조](#%EF%B8%8F-IP-주소의-클래스-구조)
- [네트워크 주소와 브로드캐스트 주소의 구조](#%EF%B8%8F-네트워크-주소와-브로드캐스트-주소의-구조)
- [서브넷의 구조](#%EF%B8%8F-서브넷의-구조)
- [라우터의 구조](#%EF%B8%8F-라우터의-구조)

<br>

## 💡 네트워크 계층의 역할
> 네트워크 계층은 라우터(router)를 이용하여 네트워크 간의 통신을 가능하게 하는 계층으로 데이터를 전송하기 위해서는 IP 주소가 필요하다.

목적지 IP 주소까지 어떤 경로로 보낼지 결정하는 것을 **라우팅(routhing)** 이라고 하는데 라우팅 라우터, 레이어 3 스위치 라는 장비를 이용하여 할 수 있다.

라우터를 이용하여 거리에 관계없이 네트워크로 데이터를 보낼 수 있으며 라우터는 **라우팅 데이블(routing table)** 에 경로 정보를 등록하고 관리한다.

### IP란?
네트워크 계층의 대표적인 프로토콜에는 IP가 있다. 네트워크 계층에서 IP 프로토콜을 사용하여 캡슐화할 때 데이터에 IP 헤더가 추가되는데 이렇게 만들어진 것을 IP 패킷이라 한다.

헤더에는 출발지 IP 주소, 목적지 IP 주소 등 데이터를 정확하게 전달하기 위한 정보들이 포함되어있다. 


<br>

## 💡 IPv4 버전 IP 주소의 구조
> IPv4 버전 IP 주소에는 인터넷에 직접 연결되는 컴퓨터나 라우터에 할당하는 **공인 IP 주소** 와 회사나 가정의 랜에 있는 컴퓨터에 할당하는 **사설 IP 주소** 가 있으며 모두 32비트를 사용한다.

IP 주소는 8비트 단위로 나눠서 총 네 개의 옥텟(octet)으로 구분하여 표시하는데 실제 IP 주소는 2진수로 되어있지만 사람도 읽기 쉽기 위해 10진수로 표시한다.

### 네트워크 ID와 호스트 ID
IP 주소는 어떤 네트워크인지를 나타내는 **네트워크 ID** 와 해당 네트워크의 어느 컴퓨터인지를 나타내는 **호스트 ID** 정보로 이루어져 있다.

```
IP 버전으로는 IPv4와 IPv6가 있으며 현재는 공존하여 사용되지만 앞으로는 IPv6를 주로 사용하게 될 것이다. IPv4는 32비트, IPv6는 128비트로 구성된다.
```

<br>

## 💡 IP 주소의 클래스 구조
> IPv4의 IP 주소는 32비트이며 비트로 구분하지만 네트워크 ID와 호스트 ID의 크기를 조정할 수 있는데 네트워크 ID의 크기에 따라 A ~ E 클래스로 구분할 수 있다. 일반 네트워크에서는 A ~ C 클래스를 사용한다.

- A 클래스 : 대규모 네트워크 주소
- B 클래스 : 중형 네트워크 주소
- C 클래스 : 소규모 네트워크 주소
- D 클래스 : 멀티캐스트(multicast) 주소
- E 클래스 : 연구 및 특수용도 주소

<br>

## 💡 네트워크 주소와 브로드캐스트 주소의 구조
> 네트워크 주소는 전체 네트워크 주소로 대표 주소이며 `192.168.1.0`이다. 브로드캐스트 주소는 네트워크에 있는 컴퓨터나 장비 모두에게 한번에 데이터를 전송하는데 사용되는 전용 IP 주소로 `192.168.1.255`이다. 이 두 주소는 특별한 주소로 컴퓨터나 라우터에 설정할 수 없다.


<br>

## 💡 서브넷의 구조
> 대규모의 네트워크를 작은 네트워크로 분할 하는 것을 **서브넷팅(subneting)** 이라고 하며, 분할된 네트워크를 **서브넷(subnet)** 이라고 한다. 기존에 네트워크 ID와 호스트 ID로 구성되어 있던 IP 주소가 서브넷팅한 후에는 호스트 ID로 사용되던 비트 일부를 서브넷으로 만들어 네트워크 ID, 서브넷 ID, 호스트 ID로 나누어진다.

### 서브넷 마스크란?
네트워크 ID와 호스트 ID를 식별하기 위한 값으로 32비트의 값 또는 프리픽스 표기법(`/비트 수`)으로 나타낼 수 있다.

- A 클래스 : 255.0.0.0
- B 클래스 : 255.255.0.0
- C 클래스 : 255.255.255.0


<br>

## 💡 라우터의 구조
> 스위치나 허브만 있는 네트워크에서는 모든 컴퓨터와 스위치가 동일한 네트워크에 속하게되나 라우터로 연결된 스위치들은 서로 다른 네트워크로 분리된다.

컴퓨터에서 다른 네트워크에 데이터를 전송하기 위해서는 네트워크의 출입구인 라우터의 IP 주소를 설정해야하며 이것을 **기본 게이트웨이(default gateway)** 라고 한다.

기본 게이트웨이를 설정한 뒤, 라우팅 테이블에 경로 정보가 등록되어 있어야 데이터를 보낼 수 있다.

### 라우팅이란?
라우팅은 경로 정보를 기반으로 현재의 네트워크에서 다른 네트워크로 최적의 경로를 통해 데이터를 전송하는 기능으로 라우팅 테이블에 경로 정보를 등록한다. 등록하는 방법은 수동과 자동이 있으며 수동은 소규모 네트워크에, 자동은 대규모 네트워크에 적합하다.

자동으로 등록하는 방법은 라우팅 프로토콜을 설정하여 라우터 간에 경로 정보를 서로 교환하여 라우팅 테이블 정보를 자동으로 수정한다.